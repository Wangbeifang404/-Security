# 简易银行管理系统代码说明

## 代码功能说明
此 Python 代码实现了一个简易的银行管理系统，借助命令行界面让用户进行账户管理操作。系统能够处理账户的注册与登录，同时支持存款、取款、转账等常规银行业务。此外，系统会把账户信息和交易记录保存到文件里，从而在程序重启后依然可以恢复数据。

## 功能列表
### # 账户管理
- **注册**：用户能够输入账号和密码来注册新账户。
- **登录**：已注册用户可以使用账号和密码登录系统。
- **退出**：用户能够选择退出系统。

### # 账户操作
- **存款**：登录用户可以往自己的账户存入资金。
- **取款**：登录用户可以从自己的账户取出资金。
- **转账**：登录用户可以把资金转到其他已注册的账户。
- **查看交易记录**：登录用户可以查看自己账户的交易历史。
-  **退出登录**：登录用户退出自己的账户。

### # 数据持久化
- **加载账户数据**：程序启动时会从 `accounts.txt` 文件加载账户信息和交易记录。
- **保存账户数据**：每次账户操作成功后，会把更新后的账户信息和交易记录保存到 `accounts.txt` 文件。

## 代码功能详解
### Account 类
#### 概述
`Account` 类用于表示账户的基本信息，对账号、密码、余额和交易记录进行封装。

#### 成员属性
- `account_number`：账户的唯一标识账号。
- `pin`：用于登录验证的密码。
- `balance`：账户当前的余额。
- `transaction_history`：存储账户所有交易记录的列表。

#### 构造方法
通过构造函数设置账户信息，初始余额默认设置为 0。

#### 常用方法
- `deposit(amount)`：实现存款功能。若存款金额大于 0，更新账户余额并记录交易，返回 `True`；否则返回 `False`。
- `withdraw(amount)`：实现取款功能。若取款金额大于 0 且不超过账户余额，更新账户余额并记录交易，返回 `True`；否则返回 `False`。
- `transfer(target_account, amount)`：实现转账功能。先尝试从当前账户取款，若成功则将款项存入目标账户，并记录双方的交易信息，返回 `True`；否则返回 `False`。

### Bank 类
#### 概述
`Bank` 类是银行管理的核心类，包含账户字典及一系列管理方法。

#### 成员属性
- `accounts`：使用字典类型存储账户信息，键为账号，值为对应的账户对象。

#### 功能方法
- `load_accounts()`：检查 `accounts.txt` 文件是否存在，若存在则读取文件内容，将每行数据解析为账户信息和交易记录，创建账户对象并添加到账户字典中。
- `save_accounts()`：将账户字典中的所有账户信息和交易记录保存到 `accounts.txt` 文件中。
- `register(account_number, pin)`：实现用户注册功能。若账号已存在，提示用户重新选择；否则创建新账户，添加到账户字典并保存到文件，提示注册成功。
- `login(account_number, pin)`：实现用户登录功能。若账号和密码匹配，提示登录成功并返回账户对象；否则提示账号或密码错误，返回 `None`。
- `get_account(account_number)`：根据账号从账户字典中获取账户对象，若账号不存在则返回 `None`。

### main 函数
#### 概述
`main` 函数是主程序的入口，负责提供菜单和处理用户的交互逻辑。

#### 成员变量
- `bank`：银行实例，用于管理账户数据。
- `current_account`：当前登录的账户对象，初始值为 `None`。

## 代码使用
### # 运行代码
1. 确保已安装 Python 环境。
2. 打开命令行，用 `cd` 进入 `bank.py` 目录。
3. 运行 `python bank.py`。

### # 操作步骤
1. **启动程序**：程序启动后会显示欢迎界面，提供注册、登录和退出的选项。
2. **注册账户**：选择注册选项，输入想要注册的账号和密码，系统会检查账号是否已存在，若不存在则注册成功。
3. **登录账户**：选择登录选项，输入账号和密码，若账号和密码正确则登录成功。
4. **账户操作**：登录成功后，会显示账户操作菜单，你可以选择存款、取款、转账、查看交易记录或退出登录。
5. **退出程序**：在欢迎界面选择退出选项，或者在登录状态下退出登录后再选择退出选项，程序将终止运行。

### # 注意事项
- 账户信息和交易记录会保存到 `accounts.txt` 文件，该文件应与代码文件处于同一目录。
- 输入金额时请确保输入的是有效的数字，否则可能会引发错误。
- 转账时要确保目标账号存在，不然转账操作会失败。 
